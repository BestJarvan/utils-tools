!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t["@xbb/xbb-utils"]=e()}(this,function(){"use strict";var e=Object.prototype.toString;function a(t){return void 0!==t&&t instanceof Array}function o(t){return null!==t&&"object"==typeof t}function i(t){return"[object Object]"===e.call(t)}function u(t){return void 0===t}function c(t){return null===t}var n,t,r=Object.freeze({isArray:a,isObject:o,isPlainObject:i,isNum:function(t){return"number"==typeof t},isFunc:function(t){return"function"==typeof t},isUndefined:u,isNull:c});(t=n||(n={})).wx="wxwork",t.h5="Html5Plus",t.lark="Lark",t.dd="DingTalk";var f=Object.prototype.hasOwnProperty;function s(t){return-1<t.indexOf("wework.qpic.cn")?t.slice(0,-1)+"100":/rescdn.qqmail.com|wx.qlogo.cn/.test(t)?t:""}function g(t){var e=window.navigator.userAgent;return t.some(function(t){return-1<e.indexOf(n[t])})}var l=Object.freeze({json:function(t,e){try{return JSON.parse(t)}catch(t){return e||[]}},isDingTalk:function(){return/DingTalk/i.test(window.navigator.userAgent)},isDevEnv:function(){var t=window.location.hostname,e="localhost"===t,n=/^\d+\.\d+\.\d+\.\d+$/.test(t);return"development"===process.env.NODE_ENV||e||n},getByteLen:function(t){if(null==t)return 0;for(var e=0,n=0,r=t;n<r.length;n++)null!==r[n].match(/[^\\x00-\\xff]/gi)?e+=1:e+=.5;return Math.floor(e)},deepClone:function t(e,n){if(!e||"object"!=typeof e)return e;var r=e.constructor===Array?[]:{};for(var o in e)f.call(e,o)&&(e[o]&&"object"==typeof e[o]?r[o]=t(e[o]):r[o]=null===n&&void 0===e[o]?n:e[o]);return r},getParamValues:function(e,t){return t.map(function(t){return t[e]})},reverseNum:function(t){var e=Number(t);return isNaN(e)?void 0:Math.abs(e-1)},getObjectType:function(t){return Object.prototype.toString.call(t).slice(8,-1)},noRepeatArray:function(t,e){var n=[],r={};return t.forEach(function(t){r[t[e]]||(n.push(t),r[t[e]]=!0)}),n},isOuterLinkEnv:function(){return 0<=window.location.href.indexOf("/outer-form.html#/")},browser:function(){var t=navigator.userAgent,e=!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),n=-1<t.indexOf("Android")||-1<t.indexOf("Linux"),r=/DingTalk/i.test(t);return e?"ios":n?"Android":r?"pc":""},isWxImg:s,thumbnail:function(t,e,n){var r=a(t)&&t[0]?t[0]:t;if(!r||"string"!=typeof r)return"";var o=s(r);if(o)return o;r=r.replace(/\?\d+$/,"");var i=window.localStorage.getItem("privateDeployInfo")||'{"oss":1,"sms":1}',u=JSON.parse(i);switch(n||u.oss){case 2:return r;case 1:case 3:default:return e&&[40,50,80,100,150,200,250].includes(e)||(e=100),r+"_"+e+"x"+e+".jpg"}},envInfo:g,isThirdPC:function(t,e){var n=window.navigator.userAgent,r=-1<t.indexOf("wx")?"WindowsWechat":"Windows",o=new RegExp(r+"|Macintosh"),i=window.localStorage.getItem("env")||"";return g(t)&&o.test(n)||e&&-1<t.indexOf(i)}});var m=Object.freeze({verifyHttp:function(t){return/^http[s]?:\/\/.*/.test(t.trim())},verifyMobile:function(t){return/^1[3456789]\d{9}$/.test(t.trim())},verifyCode:function(t){return/^\d{6}$/.test(t)},verifyEmail:function(t){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t.trim())}});function d(t){var e="";return(e="number"==typeof t?t.toString():t)[1]?e:"0"+e}function p(t,e){return void 0===e&&(e=0),Math.floor(Math.random()*(t-e)+e)}var v=Object.freeze({formatAddZero:d,dstMobile:function(t){return t.replace(/(\d{3})\d{4}(\d{0,4})/,"$1****$2")},random:p,creatMobile:function(t){void 0===t&&(t=!1);var e="1",n=[3,5,6,7,8,9],r=t?"****":""+p(9)+p(9)+p(9)+p(9);return e=e+n[p(n.length)]+p(9)+r+p(9)+p(9)+p(9)+p(9)},formatPhone:function(t){return 11!==t.length?"":t.substring(0,3)+" "+t.substring(3,7)+" "+t.substring(7)},parseParams:function(t){if(!t||-1===t.indexOf("&"))return{};for(var e=t.split("&"),n={},r=0;r<e.length;){if(-1!==e[r].indexOf("=")){var o=e[r].split("=");n[o[0]]=o[1]}r++}return n},formatParams:function(t){if(!i(t))return"";for(var e="",n=Object.keys(t),r=0;r<n.length;r++)c(t[n[r]])||u(t[n[r]])||(o(t[n[r]])?e+="&"+n[r]+"="+JSON.stringify(t[n[r]]):e+="&"+n[r]+"="+t[n[r]]);return e.length?"?"+e.substr(1):e}}),h=/d{1,4}|M{1,4}|yy(?:yy)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,y={D:function(t){return t.getDay()},DD:function(t){return d(t.getDay())},d:function(t){return t.getDate()},dd:function(t){return d(t.getDate())},M:function(t){return t.getMonth()+1},MM:function(t){return d(t.getMonth()+1)},yy:function(t){return String(t.getFullYear()).substr(2)},yyyy:function(t){return t.getFullYear()},h:function(t){return t.getHours()%12||12},hh:function(t){return d(t.getHours()%12||12)},H:function(t){return t.getHours()},HH:function(t){return d(t.getHours())},m:function(t){return t.getMinutes()},mm:function(t){return d(t.getMinutes())},s:function(t){return t.getSeconds()},ss:function(t){return d(t.getSeconds())},a:function(t){return t.getHours()<12?"am":"pm"},A:function(t){return t.getHours()<12?"AM":"PM"}};function b(t){return new Date(t.valueOf())}function x(t){return new Date(t.getTime()+288e5)}function M(t){var e=t;return e?"object"==typeof e?e.length?new Date:b(e):"number"==typeof e?(10===e.toString().length&&(e*=1e3),13===e.toString().length?new Date(e):new Date):"NaN"!==(e=new Date(e)).getTime().toString()&&e.getYear()<9999?e:new Date:new Date}function w(t,e){return t=x(M(t)),"datetime"===e?t.toISOString().substring(0,16).replace("T"," "):"seconds"===e?t.toISOString().substring(0,19).replace("T"," ").substring(11,19):t.toISOString().slice(0,10)}function D(t){if(/^-?[0-9]+$/.test(String(t))){var e=new Date(13===String(t).length?Number(t):1e3*Number(t));return{year:e.getFullYear(),month:e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,day:e.getDate()<10?"0"+e.getDate():e.getDate(),hours:e.getHours()<10?"0"+e.getHours():e.getHours(),minutes:e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes()}}return t}var O=Object.freeze({formatTime:function(t,e){void 0===e&&(e="yyyy-MM-dd HH:mm:ss"),10===t.toString().length&&(t*=1e3);var n=new Date(t);return e.replace(h,function(t){return t in y?y[t](n):t.slice(1,t.length-1)})},formatHourTime:function(t,e){10===t.toString().length&&(t*=1e3);var n=new Date(t),r=n.getFullYear(),o=n.getMonth()+1,i=n.getDate();if(e){var u=n.getHours(),a=n.getMinutes(),c=n.getSeconds();return[r,o,i].map(d).join("-")+" "+[u,a,c].map(d).join(":")}return[r,o,i].map(d).join("-")},now:function(t){var e;if(void 0===t&&(t=!1),t)e=(new Date).getTime();else{var n=(new Date).getTime().toString().substr(0,10);e=parseInt(n,0)}return e},cloneDate:b,timeZone:x,formatEffectiveDate:M,formatDate:w,formatTimeCompare:function(t){if(t=Number(t)){var e=parseInt(""+(new Date).getTime()/1e3,0)-t,n=parseInt(""+new Date((new Date).setHours(0,0,0,0)).getTime()/1e3,0);return 0===parseInt(""+e/60,0)?"刚刚":0<e&&parseInt(""+e/60,0)<60?parseInt(""+e/60,0)+"分钟前":0<e&&parseInt(""+e/3600,0)<5?parseInt(""+e/3600,0)+"小时前":n<t?"今日"+w(t,"datetime").slice(11):w(t,"datetime")}},getDay:function(t,e,n){var r=M(e);return r.setDate(r.getDate()+t),"datetime"===n?w(r,"datetime"):w(r)},getMonthDay:function(t,e,n){var r=M(e),o=r.getDate(),i=r.getMonth();return 11<(i+=t)?(r.setFullYear(r.getFullYear()+1),r.setMonth(i-12)):i<0?(r.setFullYear(r.getFullYear()-1),r.setMonth(i+12)):r.setMonth(i),r.getDate()!==o&&(r=new Date(r.getFullYear(),r.getMonth(),0)),"datetime"===n?w(r,"datetime"):w(r)},getYearDay:function(t,e,n){var r=M(e);return r.setFullYear(r.getFullYear()+t),"datetime"===n?w(r,"datetime"):w(r)},timestampToTime:D,timestampToTimeString:function(t,e){var n=D(t),r={yyyy:"year",MM:"month",dd:"day",HH:"hours",mm:"minutes"};return e=e.replace(/(yyyy)|(MM)|(dd)|(HH)|(mm)/g,function(t){return n[r[t]]})},timeToTimestamp:function(t){return isNaN(Date.parse(t))?t:Date.parse(t)/1e3},formatSecond:function(t){var e=Math.floor(t),n=0,r=0,o=0;return 60<e?(r=Math.floor(e/60),o=Math.floor(e%60),60<=r?(n=Math.floor(r/60),r=Math.floor(r%60)):n=0):(r=n=0,o=60===e?(r=1,0):e),d(n)+":"+d(r)+":"+d(o)}});var S=Object.freeze({throttle:function(r,o){void 0===o&&(o=300);var i=!1;return function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];i||(i=!0,setTimeout(function(){r.apply(t,e),i=!1},o))}},debounce:function(r,o){var i;return void 0===o&&(o=300),function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];i&&clearTimeout(i),i=setTimeout(function(){i=null,r.apply(t,e)},o)}}}),j=6;function N(t){t=+t;try{var e=t.toExponential().match(/\d(?:\.(\d*))?e([+-]\d+)/);return t.toFixed(Math.max(0,(e[1]||"").length-e[2]))}catch(t){return"0"}}function T(t,e){var n,r;try{n=N(t).toString().split(".")[1].length}catch(t){n=0}try{r=N(e).toString().split(".")[1].length}catch(t){r=0}var o=n+r,i=r-n;return{max:Math.pow(10,Math.max(n,r)),sum:Math.pow(10,o),sub:Math.pow(10,i)}}function H(t,e){void 0===e&&(e=j);var n=N(t),r=N(t).toString().split(".")[1];if((r&&r.length||0)<=e)return+n;var o=0<=(t=+t)?.5:-.5;return parseInt(t*Math.pow(10,e)+o+"",0)/Math.pow(10,e)}var I=Object.freeze({plus:function(t,e,n){var r=T(t=+t,e=+e).max;return H((t*r+e*r)/r,n)},subtract:function(t,e,n){var r=T(t=+t,e=+e).max;return H((t*r-e*r)/r,n)},multiply:function(t,e,n){var r=T(t,e).sum;return H(Number(N(t).toString().replace(".",""))*Number(N(e).toString().replace(".",""))/r,n)},divide:function(t,e,n){var r=T(t,e).sub;return H(Number(N(t).toString().replace(".",""))/Number(N(e).toString().replace(".",""))*r,n)},scientificNumber:function(t){if(!t)return t;var e,n,r=t.toString(),o=/^(\d+)(\.\d+)?(e)([+]?\d+)$/,i=/^(\d+)(\.\d+)?(e)([-]?\d+)$/,u="";if(o.test(r)){var a=(e=o.exec(r))[2]?e[2].replace(".",""):"";n=Math.abs(e[4])-(a.length||0);for(var c=0;c<n;c++)u+="0";return e[1]+a+u}if(i.test(r)){e=i.exec(r),n=Math.abs(e[4])-1,a=e[2]?e[2].replace(".",""):"";for(var f=0;f<n;f++)u+="0";return"0."+u+e[1]+a}return t},formatToNumber:function(t){var e=Number(String(t).replace(/,/g,""));return isNaN(e)?0:e},dealNumber:function(t){if(t){var e=String(t),n=e.split(".")[0],r=e.split(".")[1];return n.replace(/\B(?=(\d{3})+(?!\d))/g,",")+(r?"."+r:"")}return t}});function A(t){for(var e=[],n=0;n<t.length;n++)t[n]&&e.push(t[n]);return e}var F=Object.freeze({cleanArray:A,param:function(e){return"{}"===JSON.stringify(e)?"":A(Object.keys(e).map(function(t){return void 0===e[t]?"":encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&")},param2Obj:function(t){var e=t||window.location.search,o={};return e.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(t,e,n,r){o[e]=r}),o}});var Y,E,k=Object.freeze({guid:function(){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},getGuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})}});return E=Object.create(null),Y=E,[l,m,v,r,O,S,I,F,k].forEach(function(e){Object.getOwnPropertyNames(e).forEach(function(t){Y[t]=e[t]})}),E});
