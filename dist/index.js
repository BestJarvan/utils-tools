!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t["@xbb/xbb-utils"]=e()}(this,function(){"use strict";var e=Object.prototype.toString;function r(t){return void 0!==t&&t instanceof Array}function u(t){return null!==t&&"object"==typeof t}function o(t){return"[object Object]"===e.call(t)}function i(t){return void 0===t}function a(t){return null===t}var t=Object.freeze({isArray:r,isObject:u,isPlainObject:o,isNum:function(t){return"number"==typeof t},isFunc:function(t){return"function"==typeof t},isUndefined:i,isNull:a});var c=Object.prototype.hasOwnProperty;var n=Object.freeze({json:function(t,e){try{return JSON.parse(t)}catch(t){return e||[]}},isDingTalk:function(){return/DingTalk/i.test(window.navigator.userAgent)},isDevEnv:function(){var t=window.location.hostname,e="localhost"===t,n=/^\d+\.\d+\.\d+\.\d+$/.test(t);return"development"===process.env.NODE_ENV||e||n},getByteLen:function(t){if(null==t)return 0;for(var e=0,n=0,r=t;n<r.length;n++)null!==r[n].match(/[^\\x00-\\xff]/gi)?e+=1:e+=.5;return Math.floor(e)},deepClone:function t(e,n){if(!e||"object"!=typeof e)return e;var r=e.constructor===Array?[]:{};for(var u in e)c.call(e,u)&&(e[u]&&"object"==typeof e[u]?r[u]=t(e[u]):r[u]=null===n&&void 0===e[u]?n:e[u]);return r},getParamValues:function(e,t){return t.map(function(t){return t[e]})},reverseNum:function(t){var e=Number(t);try{if(isNaN(e))throw new Error("input is not a Number!");return Math.abs(e-1)}catch(t){console.log(t)}},getObjectType:function(t){return Object.prototype.toString.call(t).slice(8,-1)},noRepeatArray:function(t,e){var n=[],r={};return t.forEach(function(t){r[t[e]]||(n.push(t),r[t[e]]=!0)}),n},isOuterLinkEnv:function(){return 0<=window.location.href.indexOf("/outer-form.html#/")},browser:function(){var t=navigator.userAgent,e=!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),n=-1<t.indexOf("Android")||-1<t.indexOf("Linux"),r=/DingTalk/i.test(t);return e?"ios":n?"Android":r?"pc":""},thumbnail:function(t,e){var n=r(t)&&t[0]?t[0]:t;return n&&"string"==typeof n?(n=n.replace(/\?\d+$/,""),e&&[40,50,80,100,150,200,250].includes(e)||(e=100),n+"_"+e+"x"+e+".jpg"):""}});var f=Object.freeze({verifyHttp:function(t){return/^http[s]?:\/\/.*/.test(t.trim())},verifyMobile:function(t){return/^1[3456789]\d{9}$/.test(t.trim())},verifyCode:function(t){return/^\d{6}$/.test(t)},verifyEmail:function(t){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t.trim())}});function s(t){var e="";return(e="number"==typeof t?t.toString():t)[1]?e:"0"+e}function g(t,e){return void 0===e&&(e=0),Math.floor(Math.random()*(t-e)+e)}var l=Object.freeze({formatAddZero:s,dstMobile:function(t){return t.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2")},random:g,creatMobile:function(t){void 0===t&&(t=!1);var e="1",n=[3,5,6,7,8,9],r=t?"****":""+g(9)+g(9)+g(9)+g(9);return e=e+n[g(n.length)]+g(9)+r+g(9)+g(9)+g(9)+g(9)},formatPhone:function(t){return 11!==t.length?"":t.substring(0,3)+" "+t.substring(3,7)+" "+t.substring(7)},parseParams:function(t){if(!t||-1===t.indexOf("&"))return{};for(var e=t.split("&"),n={},r=0;r<e.length;){if(-1!==e[r].indexOf("=")){var u=e[r].split("=");n[u[0]]=u[1]}r++}return n},formatParams:function(t){if(!o(t))return"";for(var e="",n=Object.keys(t),r=0;r<n.length;r++)a(t[n[r]])||i(t[n[r]])||(u(t[n[r]])?e+="&"+n[r]+"="+JSON.stringify(t[n[r]]):e+="&"+n[r]+"="+t[n[r]]);return e.length?"?"+e.substr(1):e}}),m=/d{1,4}|M{1,4}|yy(?:yy)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,d={D:function(t){return t.getDay()},DD:function(t){return s(t.getDay())},d:function(t){return t.getDate()},dd:function(t){return s(t.getDate())},M:function(t){return t.getMonth()+1},MM:function(t){return s(t.getMonth()+1)},yy:function(t){return String(t.getFullYear()).substr(2)},yyyy:function(t){return t.getFullYear()},h:function(t){return t.getHours()%12||12},hh:function(t){return s(t.getHours()%12||12)},H:function(t){return t.getHours()},HH:function(t){return s(t.getHours())},m:function(t){return t.getMinutes()},mm:function(t){return s(t.getMinutes())},s:function(t){return t.getSeconds()},ss:function(t){return s(t.getSeconds())},a:function(t){return t.getHours()<12?"am":"pm"},A:function(t){return t.getHours()<12?"AM":"PM"}};function p(t){return new Date(t.valueOf())}function v(t){return new Date(t.getTime()+288e5)}function h(t){var e=t;return e?"object"==typeof e?e.length?new Date:p(e):"number"==typeof e?(10===e.toString().length&&(e*=1e3),13===e.toString().length?new Date(e):new Date):"NaN"!==(e=new Date(e)).getTime().toString()&&e.getYear()<9999?e:new Date:new Date}function y(t,e){return t=v(h(t)),"datetime"===e?t.toISOString().substring(0,16).replace("T"," "):"seconds"===e?t.toISOString().substring(0,19).replace("T"," ").substring(11,19):t.toISOString().slice(0,10)}function b(t){if(/^-?[0-9]+$/.test(String(t))){var e=new Date(13===String(t).length?Number(t):1e3*Number(t));return{year:e.getFullYear(),month:e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,day:e.getDate()<10?"0"+e.getDate():e.getDate(),hours:e.getHours()<10?"0"+e.getHours():e.getHours(),minutes:e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes()}}return t}var x=Object.freeze({formatTime:function(t,e){void 0===e&&(e="yyyy-MM-dd HH:mm:ss"),10===t.toString().length&&(t*=1e3);var n=new Date(t);return e.replace(m,function(t){return t in d?d[t](n):t.slice(1,t.length-1)})},formatHourTime:function(t,e){10===t.toString().length&&(t*=1e3);var n=new Date(t),r=n.getFullYear(),u=n.getMonth()+1,o=n.getDate();if(e){var i=n.getHours(),a=n.getMinutes(),c=n.getSeconds();return[r,u,o].map(s).join("-")+" "+[i,a,c].map(s).join(":")}return[r,u,o].map(s).join("-")},now:function(t){var e;if(void 0===t&&(t=!1),t)e=(new Date).getTime();else{var n=(new Date).getTime().toString().substr(0,10);e=parseInt(n,0)}return e},cloneDate:p,timeZone:v,formatEffectiveDate:h,formatDate:y,formatTimeCompare:function(t){if(t=Number(t)){var e=parseInt(""+(new Date).getTime()/1e3,0)-t,n=parseInt(""+new Date((new Date).setHours(0,0,0,0)).getTime()/1e3,0);return 0===parseInt(""+e/60,0)?"刚刚":0<e&&parseInt(""+e/60,0)<60?parseInt(""+e/60,0)+"分钟前":0<e&&parseInt(""+e/3600,0)<5?parseInt(""+e/3600,0)+"小时前":n<t?"今日"+y(t,"datetime").slice(11):y(t,"datetime")}},getDay:function(t,e,n){var r=h(e);return r.setDate(r.getDate()+t),"datetime"===n?y(r,"datetime"):y(r)},getMonthDay:function(t,e,n){var r=h(e),u=r.getDate(),o=r.getMonth();return 11<(o+=t)?(r.setFullYear(r.getFullYear()+1),r.setMonth(o-12)):o<0?(r.setFullYear(r.getFullYear()-1),r.setMonth(o+12)):r.setMonth(o),r.getDate()!==u&&(r=new Date(r.getFullYear(),r.getMonth(),0)),"datetime"===n?y(r,"datetime"):y(r)},getYearDay:function(t,e,n){var r=h(e);return r.setFullYear(r.getFullYear()+t),"datetime"===n?y(r,"datetime"):y(r)},timestampToTime:b,timestampToTimeString:function(t,e){var n=b(t),r={yyyy:"year",MM:"month",dd:"day",HH:"hours",mm:"minutes"};return e=e.replace(/(yyyy)|(MM)|(dd)|(HH)|(mm)/g,function(t){return n[r[t]]})},timeToTimestamp:function(t){return isNaN(Date.parse(t))?t:Date.parse(t)/1e3}});var M=Object.freeze({throttle:function(r,u){void 0===u&&(u=300);var o=!1;return function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];o||(o=!0,setTimeout(function(){r.apply(t,e),o=!1},u))}},debounce:function(r,u){var o;return void 0===u&&(u=300),function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];o&&clearTimeout(o),o=setTimeout(function(){o=null,r.apply(t,e)},u)}}}),D=6;function S(t){t=+t;try{var e=t.toExponential().match(/\d(?:\.(\d*))?e([+-]\d+)/);return t.toFixed(Math.max(0,(e[1]||"").length-e[2]))}catch(t){return"0"}}function O(t,e){var n,r;try{n=S(t).toString().split(".")[1].length}catch(t){n=0}try{r=S(e).toString().split(".")[1].length}catch(t){r=0}var u=n+r,o=r-n;return{max:Math.pow(10,Math.max(n,r)),sum:Math.pow(10,u),sub:Math.pow(10,o)}}function w(t,e){void 0===e&&(e=D);var n=S(t).toString().split(".")[1];if((n&&n.length||0)<=e)return t;var r=0<=(t=+t)?.5:-.5;return parseInt(t*Math.pow(10,e)+r+"",0)/Math.pow(10,e)}var j=Object.freeze({plus:function(t,e,n){var r=O(t=+t,e=+e).max;return w((t*r+e*r)/r,n)},subtract:function(t,e,n){var r=O(t=+t,e=+e).max;return w((t*r-e*r)/r,n)},multiply:function(t,e,n){var r=O(t,e).sum;return w(Number(S(t).toString().replace(".",""))*Number(S(e).toString().replace(".",""))/r,n)},divide:function(t,e,n){var r=O(t,e).sub;return w(Number(S(t).toString().replace(".",""))/Number(S(e).toString().replace(".",""))*r,n)},scientificNumber:function(t){if(!t)return t;var e,n,r=t.toString(),u=/^(\d+)(\.\d+)?(e)([+]?\d+)$/,o=/^(\d+)(\.\d+)?(e)([-]?\d+)$/,i="";if(u.test(r)){var a=(e=u.exec(r))[2]?e[2].replace(".",""):"";n=Math.abs(e[4])-(a.length||0);for(var c=0;c<n;c++)i+="0";return e[1]+a+i}if(o.test(r)){e=o.exec(r),n=Math.abs(e[4])-1,a=e[2]?e[2].replace(".",""):"";for(var f=0;f<n;f++)i+="0";return"0."+i+e[1]+a}return t},formatToNumber:function(t){var e=Number(String(t).replace(/,/g,""));return isNaN(e)?0:e},dealNumber:function(t){if(t){var e=String(t),n=e.split(".")[0],r=e.split(".")[1];return n.replace(/\B(?=(\d{3})+(?!\d))/g,",")+(r?"."+r:"")}return t}});function N(t){for(var e=[],n=0;n<t.length;n++)t[n]&&e.push(t[n]);return e}var T=Object.freeze({cleanArray:N,param:function(e){return"{}"===JSON.stringify(e)?"":N(Object.keys(e).map(function(t){return void 0===e[t]?"":encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&")},param2Obj:function(t){var e=t||window.location.search,u={};return e.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(t,e,n,r){u[e]=r}),u}});var H,A,I=Object.freeze({guid:function(){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},getGuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})}});return A=Object.create(null),H=A,[n,f,l,t,x,M,j,T,I].forEach(function(e){Object.getOwnPropertyNames(e).forEach(function(t){H[t]=e[t]})}),A});
